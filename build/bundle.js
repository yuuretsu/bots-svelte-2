var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function o(){return Object.create(null)}function s(t){t.forEach(n)}function r(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function i(t,e,n,o){if(t){const s=a(t,e,n,o);return t[0](s)}}function a(t,n,o,s){return t[1]&&s?e(o.ctx.slice(),t[1](s(n))):o.ctx}function u(t,e,n,o){if(t[2]&&o){const s=t[2](o(n));if(void 0===e.dirty)return s;if("object"==typeof s){const t=[],n=Math.max(e.dirty.length,s.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|s[o];return t}return e.dirty|s}return e.dirty}function d(t,e,n,o,s,r){if(s){const l=a(e,n,o,r);t.p(l,s)}}function p(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function h(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function $(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function g(t){t.parentNode.removeChild(t)}function m(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function w(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function b(t){return document.createTextNode(t)}function y(){return b(" ")}function x(){return b("")}function k(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function _(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function C(t){return""===t?null:+t}function M(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function E(t,e){t.value=null==e?"":e}function T(t,e,n){t.classList[n?"add":"remove"](e)}class A{constructor(){this.e=this.n=null}c(t){this.h(t)}m(t,e,n=null){this.e||(this.e=v(e.nodeName),this.t=e,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)f(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(g)}}let P;function S(t){P=t}function I(){if(!P)throw new Error("Function called outside component initialization");return P}function L(){const t=I();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const s=function(t,e,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,!1,e),o}(e,n);o.slice().forEach((e=>{e.call(t,s)}))}}}function z(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const O=[],H=[],B=[],N=[],j=Promise.resolve();let D=!1;function F(t){B.push(t)}function R(t){N.push(t)}let V=!1;const X=new Set;function q(){if(!V){V=!0;do{for(let t=0;t<O.length;t+=1){const e=O[t];S(e),Y(e.$$)}for(S(null),O.length=0;H.length;)H.pop()();for(let t=0;t<B.length;t+=1){const e=B[t];X.has(e)||(X.add(e),e())}B.length=0}while(O.length);for(;N.length;)N.pop()();D=!1,V=!1,X.clear()}}function Y(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(F)}}const G=new Set;let W;function J(){W={r:0,c:[],p:W}}function K(){W.r||s(W.c),W=W.p}function Q(t,e){t&&t.i&&(G.delete(t),t.i(e))}function U(t,e,n,o){if(t&&t.o){if(G.has(t))return;G.add(t),W.c.push((()=>{G.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}const Z="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function tt(t,e){const n={},o={},s={$$scope:1};let r=t.length;for(;r--;){const l=t[r],c=e[r];if(c){for(const t in l)t in c||(o[t]=1);for(const t in c)s[t]||(n[t]=c[t],s[t]=1);t[r]=c}else for(const t in l)s[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}function et(t){return"object"==typeof t&&null!==t?t:{}}function nt(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function ot(t){t&&t.c()}function st(t,e,o,l){const{fragment:c,on_mount:i,on_destroy:a,after_update:u}=t.$$;c&&c.m(e,o),l||F((()=>{const e=i.map(n).filter(r);a?a.push(...e):s(e),t.$$.on_mount=[]})),u.forEach(F)}function rt(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function lt(t,e){-1===t.$$.dirty[0]&&(O.push(t),D||(D=!0,j.then(q)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ct(e,n,r,l,c,i,a,u=[-1]){const d=P;S(e);const p=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:c,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};a&&a(p.root);let h=!1;if(p.ctx=r?r(e,n.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return p.ctx&&c(p.ctx[t],p.ctx[t]=s)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](s),h&&lt(e,t)),n})):[],p.update(),h=!0,s(p.before_update),p.fragment=!!l&&l(p.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);p.fragment&&p.fragment.l(t),t.forEach(g)}else p.fragment&&p.fragment.c();n.intro&&Q(e.$$.fragment),st(e,n.target,n.anchor,n.customElement),q()}S(d)}class it{$destroy(){rt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function at(t){let e,n;return{c(){e=w("title"),n=b(t[0])},m(t,o){f(t,e,o),$(e,n)},p(t,e){1&e&&M(n,t[0])},d(t){t&&g(e)}}}function ut(t){let e,n,o,s=t[0]&&at(t);const r=t[3].default,l=i(r,t,t[2],null);return{c(){e=w("svg"),s&&s.c(),n=x(),l&&l.c(),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"viewBox",t[1]),_(e,"class","svelte-c8tyih")},m(t,r){f(t,e,r),s&&s.m(e,null),$(e,n),l&&l.m(e,null),o=!0},p(t,[c]){t[0]?s?s.p(t,c):(s=at(t),s.c(),s.m(e,n)):s&&(s.d(1),s=null),l&&l.p&&(!o||4&c)&&d(l,r,t,t[2],o?u(r,t[2],c,null):p(t[2]),null),(!o||2&c)&&_(e,"viewBox",t[1])},i(t){o||(Q(l,t),o=!0)},o(t){U(l,t),o=!1},d(t){t&&g(e),s&&s.d(),l&&l.d(t)}}}function dt(t,e,n){let{$$slots:o={},$$scope:s}=e,{title:r=null}=e,{viewBox:l}=e;return t.$$set=t=>{"title"in t&&n(0,r=t.title),"viewBox"in t&&n(1,l=t.viewBox),"$$scope"in t&&n(2,s=t.$$scope)},[r,l,s,o]}class pt extends it{constructor(t){super(),ct(this,t,dt,ut,l,{title:0,viewBox:1})}}function ht(t){let e;return{c(){e=w("path"),_(e,"d","M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z")},m(t,n){f(t,e,n)},d(t){t&&g(e)}}}function $t(t){let n,o;const s=[{viewBox:"0 0 24 24"},t[0]];let r={$$slots:{default:[ht]},$$scope:{ctx:t}};for(let t=0;t<s.length;t+=1)r=e(r,s[t]);return n=new pt({props:r}),{c(){ot(n.$$.fragment)},m(t,e){st(n,t,e),o=!0},p(t,[e]){const o=1&e?tt(s,[s[0],et(t[0])]):{};2&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){o||(Q(n.$$.fragment,t),o=!0)},o(t){U(n.$$.fragment,t),o=!1},d(t){rt(n,t)}}}function ft(t,n,o){return t.$$set=t=>{o(0,n=e(e({},n),h(t)))},[n=h(n)]}class gt extends it{constructor(t){super(),ct(this,t,ft,$t,l,{})}}function mt(t){let e,n;const o=t[3].default,s=i(o,t,t[2],null);return{c(){e=v("div"),s&&s.c(),_(e,"class","body svelte-1qtc2ut")},m(t,o){f(t,e,o),s&&s.m(e,null),n=!0},p(t,e){s&&s.p&&(!n||4&e)&&d(s,o,t,t[2],n?u(o,t[2],e,null):p(t[2]),null)},i(t){n||(Q(s,t),n=!0)},o(t){U(s,t),n=!1},d(t){t&&g(e),s&&s.d(t)}}}function vt(t){let e,n,o,s,r,l,c,i,a,u,d,p,h;a=new gt({});let m=t[0]&&mt(t);return{c(){e=v("div"),n=v("label"),o=v("input"),s=y(),r=v("span"),l=b(t[1]),c=y(),i=v("div"),ot(a.$$.fragment),u=y(),m&&m.c(),_(o,"class","visually-hidden"),_(o,"type","checkbox"),_(r,"class","title svelte-1qtc2ut"),_(i,"class","icon header__icon svelte-1qtc2ut"),T(i,"opened",t[0]),_(n,"class","header svelte-1qtc2ut"),T(n,"opened",t[0]),_(e,"class","accordion svelte-1qtc2ut"),T(e,"opened",t[0])},m(g,v){f(g,e,v),$(e,n),$(n,o),o.checked=t[0],$(n,s),$(n,r),$(r,l),$(n,c),$(n,i),st(a,i,null),$(e,u),m&&m.m(e,null),d=!0,p||(h=k(o,"change",t[4]),p=!0)},p(t,[s]){1&s&&(o.checked=t[0]),(!d||2&s)&&M(l,t[1]),1&s&&T(i,"opened",t[0]),1&s&&T(n,"opened",t[0]),t[0]?m?(m.p(t,s),1&s&&Q(m,1)):(m=mt(t),m.c(),Q(m,1),m.m(e,null)):m&&(J(),U(m,1,1,(()=>{m=null})),K()),1&s&&T(e,"opened",t[0])},i(t){d||(Q(a.$$.fragment,t),Q(m),d=!0)},o(t){U(a.$$.fragment,t),U(m),d=!1},d(t){t&&g(e),rt(a),m&&m.d(),p=!1,h()}}}function wt(t,e,n){let{$$slots:o={},$$scope:s}=e,{title:r}=e,{opened:l=!1}=e;return t.$$set=t=>{"title"in t&&n(1,r=t.title),"opened"in t&&n(0,l=t.opened),"$$scope"in t&&n(2,s=t.$$scope)},[l,r,s,o,function(){l=this.checked,n(0,l)}]}class bt extends it{constructor(t){super(),ct(this,t,wt,vt,l,{title:1,opened:0})}}function yt(t){let e,n,o,l,c,a,h;const m=t[9].default,w=i(m,t,t[8],null);return{c(){e=v("div"),n=v("div"),w&&w.c(),_(n,"style",o=`transform: translate(${t[0][0]}px, ${t[0][1]}px);`),_(e,"class","drag-wrapper svelte-rtxv48"),_(e,"style",l=`height: ${t[1]}`)},m(o,s){f(o,e,s),$(e,n),w&&w.m(n,null),c=!0,a||(h=[k(window,"mousemove",(function(){r(t[2])&&t[2].apply(this,arguments)})),k(window,"mouseup",(function(){r(t[3])&&t[3].apply(this,arguments)})),k(window,"touchmove",(function(){r(t[4])&&t[4].apply(this,arguments)})),k(window,"touchend",(function(){r(t[5])&&t[5].apply(this,arguments)})),k(e,"mousedown",t[6]),k(e,"touchstart",t[7])],a=!0)},p(s,[r]){t=s,w&&w.p&&(!c||256&r)&&d(w,m,t,t[8],c?u(m,t[8],r,null):p(t[8]),null),(!c||1&r&&o!==(o=`transform: translate(${t[0][0]}px, ${t[0][1]}px);`))&&_(n,"style",o),(!c||2&r&&l!==(l=`height: ${t[1]}`))&&_(e,"style",l)},i(t){c||(Q(w,t),c=!0)},o(t){U(w,t),c=!1},d(t){t&&g(e),w&&w.d(t),a=!1,s(h)}}}function xt(t,e,n){let{$$slots:o={},$$scope:s}=e;function r(t){t.preventDefault(),n(0,$=[t.clientX-f[0],t.clientY-f[1]]),document.body.style.cursor="grabbing"}function l(){n(2,a=void 0),n(3,u=void 0),document.body.style.cursor="",document.body.getAttribute("style")||document.body.removeAttribute("style")}function c(t){n(0,$=[t.touches[0].clientX-f[0],t.touches[0].clientY-f[1]])}function i(){n(4,d=void 0),n(5,p=void 0)}let a,u,d,p,{height:h="auto"}=e,{currentPos:$=[0,0]}=e,f=[0,0];return t.$$set=t=>{"height"in t&&n(1,h=t.height),"currentPos"in t&&n(0,$=t.currentPos),"$$scope"in t&&n(8,s=t.$$scope)},[$,h,a,u,d,p,function(t){f=[t.clientX-$[0],t.clientY-$[1]],n(2,a=r),n(3,u=l)},function(t){var e,o;let s=(null===(e=t.touches[0])||void 0===e?void 0:e.clientX)||0,r=(null===(o=t.touches[0])||void 0===o?void 0:o.clientY)||0;f=[s-$[0],r-$[1]],n(4,d=c),n(5,p=i)},s,o]}class kt extends it{constructor(t){super(),ct(this,t,xt,yt,l,{height:1,currentPos:0})}}function _t(t){let e,n;const o=t[2].default,s=i(o,t,t[1],null);return{c(){e=v("div"),s&&s.c(),_(e,"class","sidebar svelte-4w60z7"),T(e,"opened",t[0])},m(t,o){f(t,e,o),s&&s.m(e,null),n=!0},p(t,[r]){s&&s.p&&(!n||2&r)&&d(s,o,t,t[1],n?u(o,t[1],r,null):p(t[1]),null),1&r&&T(e,"opened",t[0])},i(t){n||(Q(s,t),n=!0)},o(t){U(s,t),n=!1},d(t){t&&g(e),s&&s.d(t)}}}function Ct(t,e,n){let{$$slots:o={},$$scope:s}=e,{opened:r=!0}=e;return t.$$set=t=>{"opened"in t&&n(0,r=t.opened),"$$scope"in t&&n(1,s=t.$$scope)},[r,s,o]}class Mt extends it{constructor(t){super(),ct(this,t,Ct,_t,l,{opened:0})}}function Et(t){let e;return{c(){e=w("path"),_(e,"d","M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z")},m(t,n){f(t,e,n)},d(t){t&&g(e)}}}function Tt(t){let n,o;const s=[{viewBox:"0 0 24 24"},t[0]];let r={$$slots:{default:[Et]},$$scope:{ctx:t}};for(let t=0;t<s.length;t+=1)r=e(r,s[t]);return n=new pt({props:r}),{c(){ot(n.$$.fragment)},m(t,e){st(n,t,e),o=!0},p(t,[e]){const o=1&e?tt(s,[s[0],et(t[0])]):{};2&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){o||(Q(n.$$.fragment,t),o=!0)},o(t){U(n.$$.fragment,t),o=!1},d(t){rt(n,t)}}}function At(t,n,o){return t.$$set=t=>{o(0,n=e(e({},n),h(t)))},[n=h(n)]}class Pt extends it{constructor(t){super(),ct(this,t,At,Tt,l,{})}}function St(t){let e;return{c(){e=w("path"),_(e,"d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z")},m(t,n){f(t,e,n)},d(t){t&&g(e)}}}function It(t){let n,o;const s=[{viewBox:"0 0 24 24"},t[0]];let r={$$slots:{default:[St]},$$scope:{ctx:t}};for(let t=0;t<s.length;t+=1)r=e(r,s[t]);return n=new pt({props:r}),{c(){ot(n.$$.fragment)},m(t,e){st(n,t,e),o=!0},p(t,[e]){const o=1&e?tt(s,[s[0],et(t[0])]):{};2&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){o||(Q(n.$$.fragment,t),o=!0)},o(t){U(n.$$.fragment,t),o=!1},d(t){rt(n,t)}}}function Lt(t,n,o){return t.$$set=t=>{o(0,n=e(e({},n),h(t)))},[n=h(n)]}class zt extends it{constructor(t){super(),ct(this,t,Lt,It,l,{})}}function Ot(t){let e;return{c(){e=w("path"),_(e,"d","M8 5v14l11-7z")},m(t,n){f(t,e,n)},d(t){t&&g(e)}}}function Ht(t){let n,o;const s=[{viewBox:"0 0 24 24"},t[0]];let r={$$slots:{default:[Ot]},$$scope:{ctx:t}};for(let t=0;t<s.length;t+=1)r=e(r,s[t]);return n=new pt({props:r}),{c(){ot(n.$$.fragment)},m(t,e){st(n,t,e),o=!0},p(t,[e]){const o=1&e?tt(s,[s[0],et(t[0])]):{};2&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){o||(Q(n.$$.fragment,t),o=!0)},o(t){U(n.$$.fragment,t),o=!1},d(t){rt(n,t)}}}function Bt(t,n,o){return t.$$set=t=>{o(0,n=e(e({},n),h(t)))},[n=h(n)]}class Nt extends it{constructor(t){super(),ct(this,t,Bt,Ht,l,{})}}function jt(t){let e;return{c(){e=w("path"),_(e,"d","M6 19h4V5H6v14zm8-14v14h4V5h-4z")},m(t,n){f(t,e,n)},d(t){t&&g(e)}}}function Dt(t){let n,o;const s=[{viewBox:"0 0 24 24"},t[0]];let r={$$slots:{default:[jt]},$$scope:{ctx:t}};for(let t=0;t<s.length;t+=1)r=e(r,s[t]);return n=new pt({props:r}),{c(){ot(n.$$.fragment)},m(t,e){st(n,t,e),o=!0},p(t,[e]){const o=1&e?tt(s,[s[0],et(t[0])]):{};2&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){o||(Q(n.$$.fragment,t),o=!0)},o(t){U(n.$$.fragment,t),o=!1},d(t){rt(n,t)}}}function Ft(t,n,o){return t.$$set=t=>{o(0,n=e(e({},n),h(t)))},[n=h(n)]}class Rt extends it{constructor(t){super(),ct(this,t,Ft,Dt,l,{})}}function Vt(t){let e;return{c(){e=w("path"),_(e,"d","M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z")},m(t,n){f(t,e,n)},d(t){t&&g(e)}}}function Xt(t){let n,o;const s=[{viewBox:"0 0 24 24"},t[0]];let r={$$slots:{default:[Vt]},$$scope:{ctx:t}};for(let t=0;t<s.length;t+=1)r=e(r,s[t]);return n=new pt({props:r}),{c(){ot(n.$$.fragment)},m(t,e){st(n,t,e),o=!0},p(t,[e]){const o=1&e?tt(s,[s[0],et(t[0])]):{};2&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){o||(Q(n.$$.fragment,t),o=!0)},o(t){U(n.$$.fragment,t),o=!1},d(t){rt(n,t)}}}function qt(t,n,o){return t.$$set=t=>{o(0,n=e(e({},n),h(t)))},[n=h(n)]}class Yt extends it{constructor(t){super(),ct(this,t,qt,Xt,l,{})}}function Gt(t){let e;return{c(){e=w("path"),_(e,"d","M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z")},m(t,n){f(t,e,n)},d(t){t&&g(e)}}}function Wt(t){let n,o;const s=[{viewBox:"0 0 24 24"},t[0]];let r={$$slots:{default:[Gt]},$$scope:{ctx:t}};for(let t=0;t<s.length;t+=1)r=e(r,s[t]);return n=new pt({props:r}),{c(){ot(n.$$.fragment)},m(t,e){st(n,t,e),o=!0},p(t,[e]){const o=1&e?tt(s,[s[0],et(t[0])]):{};2&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){o||(Q(n.$$.fragment,t),o=!0)},o(t){U(n.$$.fragment,t),o=!1},d(t){rt(n,t)}}}function Jt(t,n,o){return t.$$set=t=>{o(0,n=e(e({},n),h(t)))},[n=h(n)]}class Kt extends it{constructor(t){super(),ct(this,t,Jt,Wt,l,{})}}const Qt=t=>({}),Ut=t=>({}),Zt=t=>({}),te=t=>({});function ee(t){let e,n,o,s,r,l;const c=t[5].a,a=i(c,t,t[4],te),h=t[5].b,m=i(h,t,t[4],Ut);return{c(){e=v("div"),n=v("div"),o=v("div"),a&&a.c(),s=y(),r=v("div"),m&&m.c(),_(o,"class","icon svelte-12579v1"),T(o,"hidden",t[0]),_(r,"class","icon svelte-12579v1"),T(r,"hidden",!t[0]),_(n,"class","icon-switch__inner svelte-12579v1"),T(n,"switched",t[0]),_(e,"class","icon-switch svelte-12579v1"),_(e,"style",t[1])},m(t,c){f(t,e,c),$(e,n),$(n,o),a&&a.m(o,null),$(n,s),$(n,r),m&&m.m(r,null),l=!0},p(t,[e]){a&&a.p&&(!l||16&e)&&d(a,c,t,t[4],l?u(c,t[4],e,Zt):p(t[4]),te),1&e&&T(o,"hidden",t[0]),m&&m.p&&(!l||16&e)&&d(m,h,t,t[4],l?u(h,t[4],e,Qt):p(t[4]),Ut),1&e&&T(r,"hidden",!t[0]),1&e&&T(n,"switched",t[0])},i(t){l||(Q(a,t),Q(m,t),l=!0)},o(t){U(a,t),U(m,t),l=!1},d(t){t&&g(e),a&&a.d(t),m&&m.d(t)}}}function ne(t,e,n){let{$$slots:o={},$$scope:s}=e,{width:r}=e,{height:l=r}=e,{switched:c=!1}=e,i=`width: ${r}; height: ${l};`;return t.$$set=t=>{"width"in t&&n(2,r=t.width),"height"in t&&n(3,l=t.height),"switched"in t&&n(0,c=t.switched),"$$scope"in t&&n(4,s=t.$$scope)},[c,i,r,l,s,o]}class oe extends it{constructor(t){super(),ct(this,t,ne,ee,l,{width:2,height:3,switched:0})}}function se(t){let e,n,o,s,r;return s=new Pt({}),{c(){e=v("div"),n=v("span"),n.textContent="open menu",o=y(),ot(s.$$.fragment),_(n,"class","visually-hidden"),_(e,"class","icon svelte-1l88722"),_(e,"slot","a")},m(t,l){f(t,e,l),$(e,n),$(e,o),st(s,e,null),r=!0},i(t){r||(Q(s.$$.fragment,t),r=!0)},o(t){U(s.$$.fragment,t),r=!1},d(t){t&&g(e),rt(s)}}}function re(t){let e,n,o,s,r;return s=new zt({}),{c(){e=v("div"),n=v("span"),n.textContent="close menu",o=y(),ot(s.$$.fragment),_(n,"class","visually-hidden"),_(e,"class","icon svelte-1l88722"),_(e,"slot","b")},m(t,l){f(t,e,l),$(e,n),$(e,o),st(s,e,null),r=!0},i(t){r||(Q(s.$$.fragment,t),r=!0)},o(t){U(s.$$.fragment,t),r=!1},d(t){t&&g(e),rt(s)}}}function le(t){let e,n,o,s,r;return s=new Nt({}),{c(){e=v("div"),n=v("span"),n.textContent="play",o=y(),ot(s.$$.fragment),_(n,"class","visually-hidden"),_(e,"class","icon svelte-1l88722"),_(e,"slot","a")},m(t,l){f(t,e,l),$(e,n),$(e,o),st(s,e,null),r=!0},i(t){r||(Q(s.$$.fragment,t),r=!0)},o(t){U(s.$$.fragment,t),r=!1},d(t){t&&g(e),rt(s)}}}function ce(t){let e,n,o,s,r;return s=new Rt({}),{c(){e=v("div"),n=v("span"),n.textContent="pause",o=y(),ot(s.$$.fragment),_(n,"class","visually-hidden"),_(e,"class","icon svelte-1l88722"),_(e,"slot","b")},m(t,l){f(t,e,l),$(e,n),$(e,o),st(s,e,null),r=!0},i(t){r||(Q(s.$$.fragment,t),r=!0)},o(t){U(s.$$.fragment,t),r=!1},d(t){t&&g(e),rt(s)}}}function ie(t){let e,n,o,r,l,c,i,a,u,d,p,h,m,w,b,x,C,M,E,T,A;return o=new oe({props:{width:"25px",switched:t[0],$$slots:{b:[re],a:[se]},$$scope:{ctx:t}}}),c=new oe({props:{width:"25px",switched:t[1],$$slots:{b:[ce],a:[le]},$$scope:{ctx:t}}}),h=new Yt({}),M=new Kt({}),{c(){e=v("div"),n=v("button"),ot(o.$$.fragment),r=y(),l=v("button"),ot(c.$$.fragment),i=y(),a=v("button"),u=v("div"),d=v("span"),d.textContent="step",p=y(),ot(h.$$.fragment),m=y(),w=v("button"),b=v("div"),x=v("span"),x.textContent="restart",C=y(),ot(M.$$.fragment),_(n,"class","btn svelte-1l88722"),_(l,"class","btn svelte-1l88722"),_(d,"class","visually-hidden"),_(u,"class","icon svelte-1l88722"),_(a,"class","btn svelte-1l88722"),_(x,"class","visually-hidden"),_(b,"class","icon svelte-1l88722"),_(w,"class","btn svelte-1l88722"),_(e,"class","wrapper svelte-1l88722")},m(s,g){f(s,e,g),$(e,n),st(o,n,null),$(e,r),$(e,l),st(c,l,null),$(e,i),$(e,a),$(a,u),$(u,d),$(u,p),st(h,u,null),$(e,m),$(e,w),$(w,b),$(b,x),$(b,C),st(M,b,null),E=!0,T||(A=[k(n,"click",t[2]),k(l,"click",t[3]),k(a,"click",t[4]),k(w,"click",t[5])],T=!0)},p(t,[e]){const n={};1&e&&(n.switched=t[0]),128&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n);const s={};2&e&&(s.switched=t[1]),128&e&&(s.$$scope={dirty:e,ctx:t}),c.$set(s)},i(t){E||(Q(o.$$.fragment,t),Q(c.$$.fragment,t),Q(h.$$.fragment,t),Q(M.$$.fragment,t),E=!0)},o(t){U(o.$$.fragment,t),U(c.$$.fragment,t),U(h.$$.fragment,t),U(M.$$.fragment,t),E=!1},d(t){t&&g(e),rt(o),rt(c),rt(h),rt(M),T=!1,s(A)}}}function ae(t,e,n){let{sidebarOpened:o}=e,{play:s}=e;const r=L();return t.$$set=t=>{"sidebarOpened"in t&&n(0,o=t.sidebarOpened),"play"in t&&n(1,s=t.play)},[o,s,function(){n(0,o=!o)},function(){n(1,s=!s)},function(){r("step")},function(){r("restart")}]}class ue extends it{constructor(t){super(),ct(this,t,ae,ie,l,{sidebarOpened:0,play:1})}}let de;const pe=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER);function he(t){var e;return e=t,de=function(){var t=e+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296},console.log(de()),de}function $e(t,e,n=de){return n()*(e-t)+t}function fe(t,e,n=de){return Math.floor($e(t,e,n))}function ge(t,e=de){return t[fe(0,t.length,e)]}function me(t,e,n){return n>=t?n%e:e- -n%e}function ve(t,e,n){return Math.max(Math.min(n,e),t)}function we(t,e,n){return t+(e-t)*n}he(pe);class be{constructor(t,e){this.width=t,this.height=e,this.cells=new Array(t);for(let n=0;n<t;n++)this.cells[n]=new Array(e).fill(void 0)}fixCoords(t,e){return[me(0,this.width,t),me(0,this.height,e)]}randCoords(){return[fe(0,this.width),fe(0,this.height)]}randEmpty(){let t;do{t=this.randCoords()}while(this.get(...t));return t}fill(t){return this.cells.map((e=>e.fill(t))),this}get(t,e){return this.cells[t][e]}getOr(t,e,n){const o=this.cells[t][e];return void 0!==o?o:n}set(t,e,n){this.cells[t][e]=n}remove(t,e){delete this.cells[t][e]}swap(t,e,n,o){const s=this.get(t,e),r=this.get(n,o);this.set(t,e,r),this.set(n,o,s)}forEach(t){for(let e=0;e<this.width;e++)for(let n=0;n<this.height;n++)t(this.get(e,n),e,n)}map(t){const e=new be(this.width,this.height);return this.forEach(((n,o,s)=>{e.set(o,s,t(n,o,s))})),e}flat(){return Array.prototype.concat.apply([],this.cells)}}class ye extends ImageData{constructor(t,e){super(t,e)}setPixel(t,e,n,o,s,r){const l=4*(t+e*this.width);return this.data[l]=n,this.data[l+1]=o,this.data[l+2]=s,this.data[l+3]=r,this}getPixel(t,e){const n=4*(t+e*this.width);return[this.data[n],this.data[n+1],this.data[n+2],this.data[n+3]]}}function xe(e){let n,o,r;return{c(){n=v("canvas"),_(n,"class","svelte-sywccx")},m(t,s){f(t,n,s),e[6](n),o||(r=[k(n,"click",e[7]),k(n,"mousemove",e[8]),k(n,"mouseleave",e[9])],o=!0)},p:t,i:t,o:t,d(t){t&&g(n),e[6](null),o=!1,s(r)}}}function ke(t,e,n){function o(t,e){const n=e.getBoundingClientRect(),o=t.clientX-n.left,s=t.clientY-n.top;return[Math.floor(o/c),Math.floor(s/c)]}function s(t,e){n(1,a.width=t.width*e,a),n(1,a.height=t.height*e,a),u.imageSmoothingEnabled=!1,d.width=t.width,d.height=t.height,p.putImageData(t,0,0)}function r(t){u.clearRect(0,0,a.width,a.height),u.drawImage(d,0,0,a.width,a.height),t&&function(t){const[e,n]=t;u.beginPath(),u.arc(e*c+c/2,n*c+c/2,Math.max(c,5),0,2*Math.PI),u.lineWidth=2,u.globalAlpha=.5,u.strokeStyle=window.matchMedia("(prefers-color-scheme: dark)").matches?"white":"black",u.stroke(),u.globalAlpha=1}(t)}let{imageData:l}=e,{pixelSize:c=5}=e;const i=L();let a,u,d,p,h=null;var $;window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(()=>{s(l,c),r(h)})),$=()=>{u=a.getContext("2d"),d=document.createElement("canvas"),p=d.getContext("2d"),s(l,c)},I().$$.on_mount.push($);return t.$$set=t=>{"imageData"in t&&n(4,l=t.imageData),"pixelSize"in t&&n(5,c=t.pixelSize)},t.$$.update=()=>{50&t.$$.dirty&&a&&s(l,c),3&t.$$.dirty&&a&&r(h)},[h,a,o,i,l,c,function(t){H[t?"unshift":"push"]((()=>{a=t,n(1,a)}))},t=>{if(!h)return;const[e,n]=h;i("click-block",{x:e,y:n})},t=>{n(0,h=o(t,a))},()=>n(0,h=null)]}class _e extends it{constructor(t){super(),ct(this,t,ke,xe,l,{imageData:4,pixelSize:5})}}class Ce{constructor(t,e,n,o){this.red=t,this.green=e,this.blue=n,this.alpha=o}static randRgb(t=(()=>$e(0,1))){return new Ce(fe(0,256,t),fe(0,256,t),fe(0,256,t),255)}interpolate(t,e,n=we){return new Ce(n(this.red,t.red,e),n(this.green,t.green,e),n(this.blue,t.blue,e),n(this.alpha,t.alpha,e))}toArray(){return[this.red,this.green,this.blue,this.alpha]}toString(){return`rgba(${this.red}, ${this.green}, ${this.blue}, ${this.alpha/255})`}}Ce.MAX_DIF=1020;class Me extends be{constructor(t,e,n){super(t,e),this.genePool=n,this.prevStepTime=0}}class Ee extends Me{step(){const t=performance.now(),e=[];this.forEach(((t,n,o)=>{t&&e.push({block:t,pos:[n,o]})}));e.sort((()=>$e(0,1)-.5)).forEach((({block:t,pos:e})=>t.live(...e,this))),this.prevStepTime=performance.now()-t}getPixels(t,e){const n=new ye(this.width,this.height);return this.forEach(((o,s,r)=>{if(!o)return;const l=t===o?new Ce(255,0,255,255):e(o)||new Ce(0,0,0,0);n.setPixel(s,r,...l.toArray())})),n}getComponentProps(t,e){return{imageData:this.getPixels(t,e),pixelSize:7}}getComponent(){return _e}narrowToCoords(t,e,n,o){n=me(0,8,n);const s=t+Te[n][0]*o,r=e+Te[n][1]*o;return this.fixCoords(s,r)}}const Te=[[-1,-1],[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0]];function Ae(e){let n,o,r;return{c(){n=v("span"),_(n,"contenteditable",""),_(n,"class","svelte-vam4ni"),void 0===e[0]&&F((()=>e[2].call(n)))},m(t,s){f(t,n,s),void 0!==e[0]&&(n.innerHTML=e[0]),o||(r=[k(n,"input",e[2]),k(n,"input",e[1])],o=!0)},p(t,[e]){1&e&&t[0]!==n.innerHTML&&(n.innerHTML=t[0])},i:t,o:t,d(t){t&&g(n),o=!1,s(r)}}}function Pe(t,e,n){let{innerHTML:o}=e;return t.$$set=t=>{"innerHTML"in t&&n(0,o=t.innerHTML)},[o,function(e){z.call(this,t,e)},function(){o=this.innerHTML,n(0,o)}]}class Se extends it{constructor(t){super(),ct(this,t,Pe,Ae,l,{innerHTML:0})}}function Ie(t){let e,n,o,s,r;return s=new Se({props:{innerHTML:t[0]}}),s.$on("input",t[3]),{c(){e=b(t[1]),n=b(":\n"),o=v("span"),ot(s.$$.fragment)},m(t,l){f(t,e,l),f(t,n,l),f(t,o,l),st(s,o,null),r=!0},p(t,[n]){(!r||2&n)&&M(e,t[1]);const o={};1&n&&(o.innerHTML=t[0]),s.$set(o)},i(t){r||(Q(s.$$.fragment,t),r=!0)},o(t){U(s.$$.fragment,t),r=!1},d(t){t&&g(e),t&&g(n),t&&g(o),rt(s)}}}function Le(t,e,n){const o=L();let{name:s}=e,{value:r}=e;return t.$$set=t=>{"name"in t&&n(1,s=t.name),"value"in t&&n(0,r=t.value)},[r,s,o,t=>{n(0,r=t.target.innerHTML),o("input",r)}]}class ze extends it{constructor(t){super(),ct(this,t,Le,Ie,l,{name:1,value:0})}}function Oe(e){let n,o,s,r,l,c,i,a,u,d;return{c(){n=v("div"),o=v("div"),r=y(),l=v("div"),c=v("div"),i=b(e[0]),a=y(),u=v("div"),d=b(e[1]),_(o,"class","avatar svelte-177b08r"),_(o,"style",s=`background-color: ${e[2]};`),_(c,"class","title svelte-177b08r"),_(u,"class","label"),_(l,"class","info svelte-177b08r"),_(n,"class","wrapper svelte-177b08r")},m(t,e){f(t,n,e),$(n,o),$(n,r),$(n,l),$(l,c),$(c,i),$(l,a),$(l,u),$(u,d)},p(t,[e]){4&e&&s!==(s=`background-color: ${t[2]};`)&&_(o,"style",s),1&e&&M(i,t[0]),2&e&&M(d,t[1])},i:t,o:t,d(t){t&&g(n)}}}function He(t,e,n){let{title:o}=e,{label:s=""}=e,{color:r}=e;return t.$$set=t=>{"title"in t&&n(0,o=t.title),"label"in t&&n(1,s=t.label),"color"in t&&n(2,r=t.color)},[o,s,r]}class Be extends it{constructor(t){super(),ct(this,t,He,Oe,l,{title:0,label:1,color:2})}}function Ne(t){let e,n,o,r,l,c,i,a,u,d,p,h,m,w,x,C,E,T,A,P,S,I,L,z,O,H,B,N,j,D,F,R,V,X=t[0].genome.lastMsg+"";return n=new Be({props:{title:"Бот",label:`Поколение ${String(t[0].generation)}`,color:String(t[0].getColor())}}),u=new ze({props:{value:t[0].age.toString(),name:"Возраст"}}),u.$on("input",t[2]),h=new ze({props:{value:t[0].energy.toString(),name:"Энергия"}}),h.$on("input",t[3]),{c(){e=v("div"),ot(n.$$.fragment),o=y(),r=v("div"),l=v("button"),l.textContent="Снять выделение",c=y(),i=v("div"),a=v("div"),ot(u.$$.fragment),d=y(),p=v("div"),ot(h.$$.fragment),m=y(),w=v("div"),x=b("Здоровье: "),C=v("input"),T=y(),A=v("div"),P=b("Плотоядность: "),S=v("input"),L=y(),z=v("div"),O=b("Фотосинтез: "),H=v("input"),N=y(),j=v("div"),D=b(X),_(e,"class","block svelte-18m488d"),_(r,"class","block svelte-18m488d"),_(a,"class","row svelte-18m488d"),_(p,"class","row svelte-18m488d"),_(C,"class","inline-range row-value svelte-18m488d"),_(C,"type","range"),_(C,"min","0"),_(C,"max","1"),_(C,"step","0.01"),C.value=E=t[0].health,_(w,"class","row svelte-18m488d"),_(S,"class","inline-range row-value svelte-18m488d"),_(S,"type","range"),_(S,"min","0"),_(S,"max","1"),_(S,"step","0.01"),S.value=I=t[0].abilities.attack,_(A,"class","row svelte-18m488d"),_(H,"class","inline-range row-value svelte-18m488d"),_(H,"type","range"),_(H,"min","0"),_(H,"max","1"),_(H,"step","0.01"),H.value=B=t[0].abilities.photosynthesis,_(z,"class","row svelte-18m488d"),_(j,"class","row svelte-18m488d"),_(i,"class","block svelte-18m488d")},m(s,g){f(s,e,g),st(n,e,null),f(s,o,g),f(s,r,g),$(r,l),f(s,c,g),f(s,i,g),$(i,a),st(u,a,null),$(i,d),$(i,p),st(h,p,null),$(i,m),$(i,w),$(w,x),$(w,C),$(i,T),$(i,A),$(A,P),$(A,S),$(i,L),$(i,z),$(z,O),$(z,H),$(i,N),$(i,j),$(j,D),F=!0,R||(V=[k(l,"click",t[1]),k(C,"input",t[4]),k(S,"input",t[5]),k(H,"input",t[6])],R=!0)},p(t,[e]){const o={};1&e&&(o.label=`Поколение ${String(t[0].generation)}`),1&e&&(o.color=String(t[0].getColor())),n.$set(o);const s={};1&e&&(s.value=t[0].age.toString()),u.$set(s);const r={};1&e&&(r.value=t[0].energy.toString()),h.$set(r),(!F||1&e&&E!==(E=t[0].health))&&(C.value=E),(!F||1&e&&I!==(I=t[0].abilities.attack))&&(S.value=I),(!F||1&e&&B!==(B=t[0].abilities.photosynthesis))&&(H.value=B),(!F||1&e)&&X!==(X=t[0].genome.lastMsg+"")&&M(D,X)},i(t){F||(Q(n.$$.fragment,t),Q(u.$$.fragment,t),Q(h.$$.fragment,t),F=!0)},o(t){U(n.$$.fragment,t),U(u.$$.fragment,t),U(h.$$.fragment,t),F=!1},d(t){t&&g(e),rt(n),t&&g(o),t&&g(r),t&&g(c),t&&g(i),rt(u),rt(h),R=!1,s(V)}}}function je(t,e,n){const o=L();let{block:s}=e;return t.$$set=t=>{"block"in t&&n(0,s=t.block)},[s,function(){o("deselect")},t=>n(0,s.age=+t.detail,s),t=>n(0,s.energy=+t.detail,s),t=>{n(0,s.health=+t.target.value,s)},t=>{n(0,s.abilities.attack=+t.target.value,s)},t=>{n(0,s.abilities.photosynthesis=+t.target.value,s)}]}class De extends it{constructor(t){super(),ct(this,t,je,Ne,l,{block:0})}}class Fe{constructor(t,e,n,o,s){this.rgba=t,this._energy=e,this.generation=n,this.abilities=o,this.genome=s,this.age=0,this.health=.5,this._narrow=fe(0,8)}set narrow(t){this._narrow=me(0,8,t)}get narrow(){return this._narrow}set energy(t){this._energy=t}get energy(){return+this._energy.toFixed(5)}multiply(t,e){const n=this.energy*e;return this.energy-=n,new Fe(this.rgba.interpolate(new Ce(255,255,255,255),.1),n,this.generation+1,Object.assign({},this.abilities),this.genome.replication(t))}onAttack(t,e){const n=Math.min(this.energy,e);return this.energy-=n,t.energy+=n,this.health-=.1,n}increaseAbility(t){for(const e in this.abilities)Object.prototype.hasOwnProperty.call(this.abilities,e)&&(this.abilities[e]=ve(0,1,this.abilities[e]+(e===t?.01:-.01)))}live(t,e,n){this.energy<=0||this.age>=2e3||this.health<=0?n.remove(t,e):((this.energy<1||this.energy>200)&&(this.health-=.1),this.genome.doAction(this,t,e,n),this.energy-=.1,this.age++)}getComponent(){return De}getColor(){return this.rgba}getHealthColor(){return new Ce(100,50,50,255).interpolate(new Ce(150,200,255,255),this.health)}}const Re=[];function Ve(e,n=t){let o;const s=new Set;function r(t){if(l(e,t)&&(e=t,o)){const t=!Re.length;for(const t of s)t[1](),Re.push(t,e);if(t){for(let t=0;t<Re.length;t+=2)Re[t][0](Re[t+1]);Re.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(l,c=t){const i=[l,c];return s.add(i),1===s.size&&(o=n(r)||t),l(e),()=>{s.delete(i),0===s.size&&(o(),o=null)}}}}const Xe={name:"Пустой ген",description:"Ничего не происходит",defaultEnabled:!1,color:new Ce(127,127,127,255),colorInfluence:.01,action:(t,e,n,o,s)=>({completed:!0,goto:null,msg:"Бездействие"})},qe={template:Xe,property:{option:0,branches:[0,0]}};function Ye(t){return{option:de(),branches:[fe(0,t),fe(0,t)]}}function Ge(t,e){return{template:ge(Array.from(t))||Xe,property:Ye(e)}}function We(t,e){const n=new Set;for(const o of t){const t=e[o];t&&n.add(t)}return n}class Je{constructor(t){this._pointer=0,this.lastMsg="",this.genes=new Array(t).fill(qe)}set pointer(t){this._pointer=me(0,this.genes.length,t)}get pointer(){return this._pointer}fillRandom(t){for(let e=0;e<this.genes.length;e++)this.genes[e]=Ge(t,this.genes.length);return this}mutateGene(t,e){return{template:ge(Array.from(t))||Xe,property:{option:ve(0,1,e.property.option+$e(-.01,.01)),branches:e.property.branches.map((t=>de()>.9?fe(0,this.genes.length):t))}}}replication(t){const e=new Je(this.genes.length);for(let n=0;n<this.genes.length;n++)e.genes[n]=de()>.995?this.mutateGene(t,this.genes[n]||qe):this.genes[n]||qe;return e}doAction(t,e,n,o){for(let s=0;s<Ke;s++){const s=this.genes[this.pointer];if(!s)continue;const r=s.template.action(t,e,n,o,s.property);if(null!==s.template.colorInfluence&&s.template.color&&(t.rgba=t.rgba.interpolate(s.template.color,s.template.colorInfluence)),this.pointer=null!==r.goto?this.pointer=r.goto:this.pointer=this.pointer+1,r.completed)return void(this.lastMsg=r.msg||"")}}}const Ke=8,Qe={doNothing:{name:"Отдых",description:"Прибавляет 0.1 к здоровью",defaultEnabled:!0,color:new Ce(100,100,0,255),colorInfluence:.01,action:(t,e,n,o,s)=>(t.health=Math.min(1,t.health+.1),{completed:!0,goto:null,msg:"Лечение +0.1"})},multiply:{name:"Размножение",description:"Бот теряет 1/10 энергии на попытку размножения. Если клетка перед ним пуста, энергии больше 5 единиц, а возраст больше 10 кадров, бот размножается. Потомку передается количество энергии, равное параметру гена, такое же количество вычитается из собственной энергии.",defaultEnabled:!0,color:new Ce(255,255,200,255),colorInfluence:.01,action:(t,e,n,o,s)=>{const r=o.narrowToCoords(e,n,t.narrow,1),l=o.get(...r);return t.energy*=.9,l?{completed:!0,goto:null,msg:"Размножение не удалось: спереди блок"}:t.energy<=5?{completed:!0,goto:null,msg:"Размножение не удалось: мало энергии"}:t.age<=10?{completed:!0,goto:null,msg:"Размножение не удалось: бот слишком молод"}:(o.set(...r,t.multiply(o.genePool,s.option)),{completed:!0,goto:null,msg:"Размножение"})}},rotate:{name:"Поворот",description:"Бот поворачивается по часовой стрелке, если параметр гена > 0.5, иначе против часовой стрелки",defaultEnabled:!0,color:null,colorInfluence:null,action:(t,e,n,o,s)=>(t.narrow=s.option>.5?t.narrow+1:t.narrow-1,{completed:!1,goto:null,msg:"Поворот "+(s.option>.5?"направо":"налево")})},photosynthesis:{name:"Фотосинтез",description:"Бот получает энергию путем фотосинтеза.При этом эффективность его фотосинтеза возрастает, а эффективность атак -- падает.Восстанавливает своё здоровье на 0.01.",defaultEnabled:!0,color:new Ce(0,255,0,255),colorInfluence:.01,action:(t,e,n,o,s)=>{const r=Math.max(0,0-Math.hypot((e-o.width/2)/10,(n-o.height/2)/10)**5+2.5);return t.energy+=r,t.increaseAbility("photosynthesis"),t.health=Math.min(1,t.health+.01),{completed:!0,goto:null,msg:`Фототсинтез: +${r.toFixed(2)} энергии`}}},attack:{name:"Атака",description:"Бот атакует блок перед собой, забирая себе часть его энергии.Повышает здоровье на 0.01.",defaultEnabled:!0,color:new Ce(255,0,0,255),colorInfluence:.01,action:(t,e,n,o,s)=>{const r=o.get(...o.narrowToCoords(e,n,t.narrow,1));let l;if(r){const e=we(0,5,s.option)*t.abilities.attack**2,n=r.onAttack(t,e);t.increaseAbility("attack"),t.health=Math.min(1,t.health+.01),l=`Атака: +${n.toFixed(2)} энергии`}else l="Атака не удалась";return t.energy-=.5,{completed:!0,goto:null,msg:l}}},moveForward:{name:"Двигаться вперед",description:"Бот перемещется в клетку перед собой, если она пустая.Расходует 0.5 энергии.",defaultEnabled:!0,color:new Ce(200,200,200,255),colorInfluence:null,action:(t,e,n,o,s)=>{const r=o.narrowToCoords(e,n,t.narrow,1);let l;return o.get(...r)?l="Передвижение не удалось":(o.swap(e,n,...r),l="Передвижение"),t.energy-=.5,{completed:!0,goto:null,msg:l}}},push:{name:"Толкнуть",description:"Бот отталкивает блок перед собой на одну клетку, если клетка за ним пуста.Расходует 0.5 энергии.",defaultEnabled:!0,color:new Ce(0,0,255,255),colorInfluence:.01,action:(t,e,n,o,s)=>{const r=o.narrowToCoords(e,n,t.narrow,1),l=o.get(...r),c=o.narrowToCoords(e,n,t.narrow,2),i=o.get(...c);let a;return l&&!i?(o.swap(...r,...c),a="Толкнул другой объект"):a="Не удалось толкнуть другой объект",t.energy-=.5,{completed:!0,goto:null,msg:a}}},swap:{name:"Меняться местами",description:"Бот меняется местами с клеткой перед собой, расходуя при этом 1 энергии.",defaultEnabled:!1,color:new Ce(255,255,255,255),colorInfluence:null,action:(t,e,n,o,s)=>{const r=o.narrowToCoords(e,n,t.narrow,1);return o.swap(...r,e,n),t.energy-=1,{completed:!0,goto:null,msg:"Поменялся местами с другой клеткой"}}},movePointer:{name:"Переместить указатель",description:"Следующая команда генома будет той, которая указана в ветке 1 текущего гена.",defaultEnabled:!0,color:null,colorInfluence:null,action:(t,e,n,o,s)=>{const r=s.branches[0];return{completed:!1,goto:r,msg:`Перенос указателя → ${r}`}}},checkHealth:{name:"Проверить здоровье",description:"Следующая команда генома будет той, на которую указывает ветка 1 текущего гена, если здоровье бота меньше, чем параметр текущего гена.Иначе следующая команда берется из ветки 2.",defaultEnabled:!0,color:null,colorInfluence:null,action:(t,e,n,o,s)=>{if(t.health<s.option){const t=s.branches[0];return{completed:!1,goto:t,msg:`Проверка здоровья → ${t}`}}const r=s.branches[1];return{completed:!1,goto:r,msg:`Проверка здоровья → ${r}`}}},checkEnergy:{name:"Проверить энергию",description:"Следующая команда генома будет той, на которую указывает ветка 1 текущего гена, если энергия бота меньше, чем параметр текущего гена, умноженный на 300. Иначе следующая команда берется из ветки 2.",defaultEnabled:!0,color:null,colorInfluence:null,action:(t,e,n,o,s)=>{if(t.energy/300<s.option){const t=s.branches[0];return{completed:!1,goto:t,msg:`Проверка энергии → ${t}`}}const r=s.branches[1];return{completed:!1,goto:r,msg:`Проверка энергии → ${r}`}}},forward:{name:"Спереди блок?",description:"Следующая команда генома будет той, на которую указывает ветка 1 текущего гена, если перед ботом есть пустая клетка.Иначе следующая команда берется из ветки 2.",defaultEnabled:!0,color:null,colorInfluence:null,action:(t,e,n,o,s)=>{const r=o.narrowToCoords(e,n,t.narrow,1);if(o.get(...r)){const t=s.branches[0];return{completed:!1,goto:t,msg:`Спереди блок → ${t}`}}const l=s.branches[1];return{completed:!1,goto:l,msg:`Спереди нет блока → ${l}`}}}};function Ue(t){let e;return{c(){e=w("path"),_(e,"d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z")},m(t,n){f(t,e,n)},d(t){t&&g(e)}}}function Ze(t){let n,o;const s=[{viewBox:"0 0 24 24"},t[0]];let r={$$slots:{default:[Ue]},$$scope:{ctx:t}};for(let t=0;t<s.length;t+=1)r=e(r,s[t]);return n=new pt({props:r}),{c(){ot(n.$$.fragment)},m(t,e){st(n,t,e),o=!0},p(t,[e]){const o=1&e?tt(s,[s[0],et(t[0])]):{};2&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){o||(Q(n.$$.fragment,t),o=!0)},o(t){U(n.$$.fragment,t),o=!1},d(t){rt(n,t)}}}function tn(t,n,o){return t.$$set=t=>{o(0,n=e(e({},n),h(t)))},[n=h(n)]}class en extends it{constructor(t){super(),ct(this,t,tn,Ze,l,{})}}function nn(e){let n,o,s,r,l,c;return s=new en({}),{c(){n=v("button"),o=v("div"),ot(s.$$.fragment),_(o,"class","close-icon"),_(n,"class","svelte-7rf8t2")},m(t,i){f(t,n,i),$(n,o),st(s,o,null),r=!0,l||(c=k(n,"click",e[3]),l=!0)},p:t,i(t){r||(Q(s.$$.fragment,t),r=!0)},o(t){U(s.$$.fragment,t),r=!1},d(t){t&&g(n),rt(s),l=!1,c()}}}function on(t){let e,n,o,s,r,l,c=t[0]&&nn(t);return{c(){e=v("div"),n=v("input"),o=y(),c&&c.c(),_(n,"placeholder",t[1]),_(n,"type","text"),_(n,"class","svelte-7rf8t2"),_(e,"class","wrapper svelte-7rf8t2")},m(i,a){f(i,e,a),$(e,n),E(n,t[0]),$(e,o),c&&c.m(e,null),s=!0,r||(l=k(n,"input",t[2]),r=!0)},p(t,[o]){(!s||2&o)&&_(n,"placeholder",t[1]),1&o&&n.value!==t[0]&&E(n,t[0]),t[0]?c?(c.p(t,o),1&o&&Q(c,1)):(c=nn(t),c.c(),Q(c,1),c.m(e,null)):c&&(J(),U(c,1,1,(()=>{c=null})),K())},i(t){s||(Q(c),s=!0)},o(t){U(c),s=!1},d(t){t&&g(e),c&&c.d(),r=!1,l()}}}function sn(t,e,n){let{placeholder:o=""}=e,{value:s=""}=e;return t.$$set=t=>{"placeholder"in t&&n(1,o=t.placeholder),"value"in t&&n(0,s=t.value)},[s,o,function(){s=this.value,n(0,s)},()=>n(0,s="")]}class rn extends it{constructor(t){super(),ct(this,t,sn,on,l,{placeholder:1,value:0})}}function ln(t,e,n){const o=t.slice();return o[7]=e[n].value,o[8]=e[n].content,o[9]=e[n].color,o}function cn(t){let e,n,o,s,r,l,c,i,a=t[8]+"";return{c(){e=v("label"),n=v("input"),s=y(),r=new A,l=y(),_(n,"type","checkbox"),_(n,"class","visually-hidden"),n.__value=o=t[7],n.value=n.__value,t[6][0].push(n),r.a=l,_(e,"class","svelte-1uhf8nr"),T(e,"checked",t[0].includes(t[7]))},m(o,u){f(o,e,u),$(e,n),n.checked=~t[0].indexOf(n.__value),$(e,s),r.m(a,e),$(e,l),c||(i=k(n,"change",t[5]),c=!0)},p(t,s){6&s&&o!==(o=t[7])&&(n.__value=o,n.value=n.__value),1&s&&(n.checked=~t[0].indexOf(n.__value)),6&s&&a!==(a=t[8]+"")&&r.p(a),7&s&&T(e,"checked",t[0].includes(t[7]))},d(o){o&&g(e),t[6][0].splice(t[6][0].indexOf(n),1),c=!1,i()}}}function an(t){let e,n,o,s,r,l,c;function i(e){t[3](e)}let a={placeholder:"фильтр"};void 0!==t[2]&&(a.value=t[2]),o=new rn({props:a}),H.push((()=>nt(o,"value",i)));let u=t[1].filter(t[4]),d=[];for(let e=0;e<u.length;e+=1)d[e]=cn(ln(t,u,e));return{c(){e=v("div"),n=v("div"),ot(o.$$.fragment),r=y(),l=v("div");for(let t=0;t<d.length;t+=1)d[t].c();_(n,"class","filter svelte-1uhf8nr"),_(l,"class","wrapper-inner wrapper__inner svelte-1uhf8nr"),_(e,"class","wrapper")},m(t,s){f(t,e,s),$(e,n),st(o,n,null),$(e,r),$(e,l);for(let t=0;t<d.length;t+=1)d[t].m(l,null);c=!0},p(t,[e]){const n={};if(!s&&4&e&&(s=!0,n.value=t[2],R((()=>s=!1))),o.$set(n),7&e){let n;for(u=t[1].filter(t[4]),n=0;n<u.length;n+=1){const o=ln(t,u,n);d[n]?d[n].p(o,e):(d[n]=cn(o),d[n].c(),d[n].m(l,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=u.length}},i(t){c||(Q(o.$$.fragment,t),c=!0)},o(t){U(o.$$.fragment,t),c=!1},d(t){t&&g(e),rt(o),m(d,t)}}}function un(t,e,n){let{values:o=[]}=e,{checked:s=[]}=e,r="";const l=[[]];return t.$$set=t=>{"values"in t&&n(1,o=t.values),"checked"in t&&n(0,s=t.checked)},[s,o,r,function(t){r=t,n(2,r)},({content:t})=>t.toLowerCase().match(new RegExp(r.toLowerCase())),function(){s=function(t,e,n){const o=new Set;for(let e=0;e<t.length;e+=1)t[e].checked&&o.add(t[e].__value);return n||o.delete(e),Array.from(o)}(l[0],this.__value,this.checked),n(0,s)},l]}class dn extends it{constructor(t){super(),ct(this,t,un,an,l,{values:1,checked:0})}}function pn(e){let n,o,s,r;return{c(){n=v("div"),o=v("input"),_(o,"placeholder",e[1]),_(o,"type","number"),_(o,"class","svelte-admt1x"),_(n,"class","wrapper svelte-admt1x")},m(t,l){f(t,n,l),$(n,o),E(o,e[0]),s||(r=k(o,"input",e[2]),s=!0)},p(t,[e]){2&e&&_(o,"placeholder",t[1]),1&e&&C(o.value)!==t[0]&&E(o,t[0])},i:t,o:t,d(t){t&&g(n),s=!1,r()}}}function hn(t,e,n){let{placeholder:o=""}=e,{value:s=NaN}=e;return t.$$set=t=>{"placeholder"in t&&n(1,o=t.placeholder),"value"in t&&n(0,s=t.value)},[s,o,function(){s=C(this.value),n(0,s)}]}class $n extends it{constructor(t){super(),ct(this,t,hn,pn,l,{placeholder:1,value:0})}}const fn={normal:{name:"Стандартный",blockToColor:t=>t.getColor()},health:{name:"Здоровье",blockToColor:t=>t.getHealthColor()}},{window:gn}=Z;function mn(t,e,n){const o=t.slice();return o[36]=e[n][0],o[37]=e[n][1].name,o}function vn(t){let n,o,s;const r=[t[9]];var l=t[8].getComponent();function c(t){let n={};for(let t=0;t<r.length;t+=1)n=e(n,r[t]);return{props:n}}return l&&(n=new l(c()),n.$on("click-block",t[15])),{c(){n&&ot(n.$$.fragment),o=x()},m(t,e){n&&st(n,t,e),f(t,o,e),s=!0},p(t,e){const s=512&e[0]?tt(r,[et(t[9])]):{};if(l!==(l=t[8].getComponent())){if(n){J();const t=n;U(t.$$.fragment,1,0,(()=>{rt(t,1)})),K()}l?(n=new l(c()),n.$on("click-block",t[15]),ot(n.$$.fragment),Q(n.$$.fragment,1),st(n,o.parentNode,o)):n=null}else l&&n.$set(s)},i(t){s||(n&&Q(n.$$.fragment,t),s=!0)},o(t){n&&U(n.$$.fragment,t),s=!1},d(t){t&&g(o),n&&rt(n,t)}}}function wn(t){let e,n,o,r,l,c,i,a,u,d,p,h,m=t[0].join(", ")+"";return{c(){e=v("input"),n=y(),o=v("div"),r=v("label"),l=b("seed: "),c=v("input"),i=y(),a=v("div"),u=b("checkboxes: "),d=b(m),_(e,"type","range"),_(e,"min","1"),_(e,"max","240"),_(c,"type","number")},m(s,g){f(s,e,g),E(e,t[12]),f(s,n,g),f(s,o,g),$(o,r),$(r,l),$(r,c),E(c,t[1]),f(s,i,g),f(s,a,g),$(a,u),$(a,d),p||(h=[k(e,"change",t[21]),k(e,"input",t[21]),k(c,"input",t[22])],p=!0)},p(t,n){4096&n[0]&&E(e,t[12]),2&n[0]&&C(c.value)!==t[1]&&E(c,t[1]),1&n[0]&&m!==(m=t[0].join(", ")+"")&&M(d,m)},d(t){t&&g(e),t&&g(n),t&&g(o),t&&g(i),t&&g(a),p=!1,s(h)}}}function bn(e){let n;return{c(){n=b("Кликните по цветному пикселю на карте, чтобы увидеть информацию о нём.")},m(t,e){f(t,n,e)},p:t,i:t,o:t,d(t){t&&g(n)}}}function yn(t){let e,n,o;var s=t[3].getComponent();function r(t){return{props:{block:t[3]}}}return s&&(e=new s(r(t)),e.$on("deselect",t[16])),{c(){e&&ot(e.$$.fragment),n=x()},m(t,s){e&&st(e,t,s),f(t,n,s),o=!0},p(t,o){const l={};if(8&o[0]&&(l.block=t[3]),s!==(s=t[3].getComponent())){if(e){J();const t=e;U(t.$$.fragment,1,0,(()=>{rt(t,1)})),K()}s?(e=new s(r(t)),e.$on("deselect",t[16]),ot(e.$$.fragment),Q(e.$$.fragment,1),st(e,n.parentNode,n)):e=null}else s&&e.$set(l)},i(t){o||(e&&Q(e.$$.fragment,t),o=!0)},o(t){e&&U(e.$$.fragment,t),o=!1},d(t){t&&g(n),e&&rt(e,t)}}}function xn(t){let e,n,o,s;const r=[yn,bn],l=[];function c(t,e){return t[3]?0:1}return e=c(t),n=l[e]=r[e](t),{c(){n.c(),o=x()},m(t,n){l[e].m(t,n),f(t,o,n),s=!0},p(t,s){let i=e;e=c(t),e===i?l[e].p(t,s):(J(),U(l[i],1,1,(()=>{l[i]=null})),K(),n=l[e],n?n.p(t,s):(n=l[e]=r[e](t),n.c()),Q(n,1),n.m(o.parentNode,o))},i(t){s||(Q(n),s=!0)},o(t){U(n),s=!1},d(t){l[e].d(t),t&&g(o)}}}function kn(t){let e,n,o,s,r,l,c,i,a=t[37]+"";return{c(){e=v("label"),n=v("input"),s=y(),r=b(a),l=y(),_(n,"type","radio"),n.__value=o=t[36],n.value=n.__value,t[24][0].push(n)},m(o,a){f(o,e,a),$(e,n),n.checked=n.__value===t[10],$(e,s),$(e,r),$(e,l),c||(i=k(n,"change",t[23]),c=!0)},p(t,e){1024&e[0]&&(n.checked=n.__value===t[10])},d(o){o&&g(e),t[24][0].splice(t[24][0].indexOf(n),1),c=!1,i()}}}function _n(t){let e,n=Object.entries(fn),o=[];for(let e=0;e<n.length;e+=1)o[e]=kn(mn(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=x()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);f(t,e,n)},p(t,s){if(1024&s[0]){let r;for(n=Object.entries(fn),r=0;r<n.length;r+=1){const l=mn(t,n,r);o[r]?o[r].p(l,s):(o[r]=kn(l),o[r].c(),o[r].m(e.parentNode,e))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(t){m(o,t),t&&g(e)}}}function Cn(t){let e,n,o;function s(e){t[26](e)}let r={values:Object.entries(Qe).map(t[25])};return void 0!==t[0]&&(r.checked=t[0]),e=new dn({props:r}),H.push((()=>nt(e,"checked",s))),{c(){ot(e.$$.fragment)},m(t,n){st(e,t,n),o=!0},p(t,o){const s={};!n&&1&o[0]&&(n=!0,s.checked=t[0],R((()=>n=!1))),e.$set(s)},i(t){o||(Q(e.$$.fragment,t),o=!0)},o(t){U(e.$$.fragment,t),o=!1},d(t){rt(e,t)}}}function Mn(t){let e,n,o,s,r,l,c,i,a,u,d;function p(e){t[27](e)}let h={placeholder:"ширина"};function $(e){t[28](e)}void 0!==t[6]&&(h.value=t[6]),n=new $n({props:h}),H.push((()=>nt(n,"value",p)));let m={placeholder:"высота"};return void 0!==t[7]&&(m.value=t[7]),r=new $n({props:m}),H.push((()=>nt(r,"value",$))),{c(){e=b("Ширина\n      "),ot(n.$$.fragment),s=b("\n      Высота\n      "),ot(r.$$.fragment),c=y(),i=v("button"),i.textContent="Рестарт"},m(o,l){f(o,e,l),st(n,o,l),f(o,s,l),st(r,o,l),f(o,c,l),f(o,i,l),a=!0,u||(d=k(i,"click",t[14]),u=!0)},p(t,e){const s={};!o&&64&e[0]&&(o=!0,s.value=t[6],R((()=>o=!1))),n.$set(s);const c={};!l&&128&e[0]&&(l=!0,c.value=t[7],R((()=>l=!1))),r.$set(c)},i(t){a||(Q(n.$$.fragment,t),Q(r.$$.fragment,t),a=!0)},o(t){U(n.$$.fragment,t),U(r.$$.fragment,t),a=!1},d(t){t&&g(e),rt(n,t),t&&g(s),rt(r,t),t&&g(c),t&&g(i),u=!1,d()}}}function En(t){let e,n,o,s,r;return{c(){e=v("label"),n=v("input"),o=b("\n        Показать сетку"),_(n,"type","checkbox")},m(l,c){f(l,e,c),$(e,n),n.checked=t[5],$(e,o),s||(r=k(n,"change",t[29]),s=!0)},p(t,e){32&e[0]&&(n.checked=t[5])},d(t){t&&g(e),s=!1,r()}}}function Tn(t){let e,n,o,s,r,l,c,i,a,u,d,p,h,$,m,w;return o=new bt({props:{title:"Всяческое",$$slots:{default:[wn]},$$scope:{ctx:t}}}),r=new bt({props:{title:"Выделенный блок",opened:t[4],$$slots:{default:[xn]},$$scope:{ctx:t}}}),c=new bt({props:{title:"Режим просмотра",opened:!0,$$slots:{default:[_n]},$$scope:{ctx:t}}}),a=new bt({props:{title:"Генофонд",opened:!0,$$slots:{default:[Cn]},$$scope:{ctx:t}}}),d=new bt({props:{title:"Новый мир",opened:!0,$$slots:{default:[Mn]},$$scope:{ctx:t}}}),h=new bt({props:{title:"dev",$$slots:{default:[En]},$$scope:{ctx:t}}}),{c(){e=v("button"),e.textContent="step",n=y(),ot(o.$$.fragment),s=y(),ot(r.$$.fragment),l=y(),ot(c.$$.fragment),i=y(),ot(a.$$.fragment),u=y(),ot(d.$$.fragment),p=y(),ot(h.$$.fragment)},m(g,v){f(g,e,v),f(g,n,v),st(o,g,v),f(g,s,v),st(r,g,v),f(g,l,v),st(c,g,v),f(g,i,v),st(a,g,v),f(g,u,v),st(d,g,v),f(g,p,v),st(h,g,v),$=!0,m||(w=k(e,"click",t[13]),m=!0)},p(t,e){const n={};4099&e[0]|512&e[1]&&(n.$$scope={dirty:e,ctx:t}),o.$set(n);const s={};16&e[0]&&(s.opened=t[4]),8&e[0]|512&e[1]&&(s.$$scope={dirty:e,ctx:t}),r.$set(s);const l={};1024&e[0]|512&e[1]&&(l.$$scope={dirty:e,ctx:t}),c.$set(l);const i={};1&e[0]|512&e[1]&&(i.$$scope={dirty:e,ctx:t}),a.$set(i);const u={};192&e[0]|512&e[1]&&(u.$$scope={dirty:e,ctx:t}),d.$set(u);const p={};32&e[0]|512&e[1]&&(p.$$scope={dirty:e,ctx:t}),h.$set(p)},i(t){$||(Q(o.$$.fragment,t),Q(r.$$.fragment,t),Q(c.$$.fragment,t),Q(a.$$.fragment,t),Q(d.$$.fragment,t),Q(h.$$.fragment,t),$=!0)},o(t){U(o.$$.fragment,t),U(r.$$.fragment,t),U(c.$$.fragment,t),U(a.$$.fragment,t),U(d.$$.fragment,t),U(h.$$.fragment,t),$=!1},d(t){t&&g(e),t&&g(n),rt(o,t),t&&g(s),rt(r,t),t&&g(l),rt(c,t),t&&g(i),rt(a,t),t&&g(u),rt(d,t),t&&g(p),rt(h,t),m=!1,w()}}}function An(t){let e,n,o,s,r,l,c,i,a,u,d,p;function h(e){t[30](e)}function m(e){t[31](e)}o=new kt({props:{height:"100%",$$slots:{default:[vn]},$$scope:{ctx:t}}}),r=new Mt({props:{opened:t[2],$$slots:{default:[Tn]},$$scope:{ctx:t}}});let w={};return void 0!==t[2]&&(w.sidebarOpened=t[2]),void 0!==t[11]&&(w.play=t[11]),c=new ue({props:w}),H.push((()=>nt(c,"sidebarOpened",h))),H.push((()=>nt(c,"play",m))),c.$on("step",t[13]),c.$on("restart",t[14]),{c(){e=v("main"),n=v("div"),ot(o.$$.fragment),s=y(),ot(r.$$.fragment),l=y(),ot(c.$$.fragment),_(n,"class","drag-wrapper-wrapper svelte-m7vy6c"),T(n,"open",t[2]),_(e,"class","svelte-m7vy6c"),T(e,"show-css",t[5])},m(i,a){f(i,e,a),$(e,n),st(o,n,null),$(e,s),st(r,e,null),$(e,l),st(c,e,null),u=!0,d||(p=k(gn,"resize",t[20]),d=!0)},p(t,s){const l={};768&s[0]|512&s[1]&&(l.$$scope={dirty:s,ctx:t}),o.$set(l),4&s[0]&&T(n,"open",t[2]);const u={};4&s[0]&&(u.opened=t[2]),5371&s[0]|512&s[1]&&(u.$$scope={dirty:s,ctx:t}),r.$set(u);const d={};!i&&4&s[0]&&(i=!0,d.sidebarOpened=t[2],R((()=>i=!1))),!a&&2048&s[0]&&(a=!0,d.play=t[11],R((()=>a=!1))),c.$set(d),32&s[0]&&T(e,"show-css",t[5])},i(t){u||(Q(o.$$.fragment,t),Q(r.$$.fragment,t),Q(c.$$.fragment,t),u=!0)},o(t){U(o.$$.fragment,t),U(r.$$.fragment,t),U(c.$$.fragment,t),u=!1},d(t){t&&g(e),rt(o),rt(r),rt(c),d=!1,p()}}}function Pn(t){let e=t;return t&&(window.clearInterval(t),console.log(`stop ${t} loop`),t=null),e}function Sn(t,e,n){let o,s,r;function l(){y.step(),n(9,x=y.getComponentProps(p,fn[o].blockToColor)),p&&n(3,p)}function i(t,e,n){const s=new Ee(t,e,n);for(let t=0;t<s.height;t++)for(let e=0;e<s.width;e++)if(de()>.1){const n=new Ce(127,127,127,127),o=new Je(32).fillRandom(s.genePool);s.set(e,t,new Fe(n,100,1,{photosynthesis:.5,attack:.5},o))}const r=s.getComponentProps(p,fn[o].blockToColor);return{world:s,worldProps:r}}let a=pe,u=Ve("normal");c(t,u,(t=>n(10,o=t)));let d=!0,p=null,h=!!p,$=Ve(!1);c(t,$,(t=>n(11,s=t)));let f=Ve(240);c(t,f,(t=>n(12,r=t)));let g=function(t,e,n=!0){const o={stop(){window.clearInterval(s),s=void 0,n=!1},start(){s||(s=window.setInterval(t,1e3/e),n=!0)},setFps(t,n=!0){e=t,this.stop(),n&&this.start()}};let s;return n&&o.start(),o}(l,r,s);$.subscribe((function(){s?g.start():g.stop()})),f.subscribe((()=>{g.setFps(r,s)}));let m=!1,v=Object.entries(Qe).filter((([t,e])=>e.defaultEnabled)).map((([t,e])=>t)),w=50,b=50,{world:y,worldProps:x}=i(w,b,We(new Set(v),Qe));var k;u.subscribe((()=>{n(9,x=y.getComponentProps(p,fn[o].blockToColor))})),k=Pn.bind(null,null),I().$$.on_destroy.push(k);return t.$$.update=()=>{1&t.$$.dirty[0]&&n(8,y.genePool=We(new Set(v),Qe),y)},[v,a,d,p,h,m,w,b,y,x,o,s,r,function(){var t;l(),s=!1,t=s,$.set(t)},function(){he(a);const t=i(w,b,We(new Set(v),Qe));n(8,y=t.world),n(9,x=t.worldProps)},function({detail:t}){const{x:e,y:s}=t;n(3,p=y.get(e,s)||null),n(4,h=!!p),h&&n(2,d=!0),n(9,x=y.getComponentProps(p,fn[o].blockToColor));const r=new Ce(127,127,127,127),l=new Je(32).fillRandom(y.genePool),c=Qe.photosynthesis.action(new Fe(r,100,1,{photosynthesis:.5,attack:.5},l),e,s,y,{option:1,branches:[0,0]}).msg;console.log(c)},function(){n(3,p=null),n(9,x=y.getComponentProps(p,fn[o].blockToColor))},u,$,f,()=>{window.matchMedia("(orientation: landscape)").matches?document.body.classList.add("static"):document.body.classList.remove("static")},function(){r=C(this.value),f.set(r)},function(){a=C(this.value),n(1,a)},function(){o=this.__value,u.set(o)},[[]],([t,e])=>({value:t,content:e.name,color:e.color?.interpolate(new Ce(255,255,255,255),.5)}),function(t){v=t,n(0,v)},function(t){w=t,n(6,w)},function(t){b=t,n(7,b)},function(){m=this.checked,n(5,m)},function(t){d=t,n(2,d)},function(t){s=t,$.set(s)}]}return new class extends it{constructor(t){super(),ct(this,t,Sn,An,l,{},null,[-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
